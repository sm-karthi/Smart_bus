<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Update your data</h1>
    <button id="updateButton">Update</button>
</body>
<script type="module">// Function to upload data from local JSON to Firebase

    // Import Firebase dependencies
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
import { ref, set,getDatabase } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";

// Firebase Setup
const firebaseConfig = {
    apiKey: "AIzaSyD2-zKNWSqkRWHsk49coYSbMfBnywCpdO8",
    authDomain: "smartbus-7443b.firebaseapp.com",
    projectId: "smartbus-7443b",
    storageBucket: "smartbus-7443b.appspot.com",
    messagingSenderId: "35022257891",
    appId: "1:35022257891:web:8eed74fb4131a414730fd6"
};
const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
async function uploadJSONToFirebase() {
    try {
        const response = await fetch("../assets/pages/scripts/JSON/buses.json");
        if (!response.ok) throw new Error("Failed to load local JSON file.");
        const buses = await response.json();

        const dbRef = ref(database, "buses/");

        // Optional: Clear existing data before uploading new data
        await set(dbRef, null);

        // Use Promise.all to upload all buses in parallel
        const uploadPromises = buses.map((bus, index) => {
            const busRef = ref(database, `buses/${index}`);
            return set(busRef, bus);
        });

        // Wait for all uploads to complete
        await Promise.all(uploadPromises);
        alert("Data uploaded to Firebase successfully!")
        console.log("Data uploaded to Firebase successfully!");
    } catch (error) {
        console.error("Error uploading JSON to Firebase:", error);
        alert("An error occurred while uploading data to Firebase. Please try again.");
    }
}

    document.getElementById("updateButton").addEventListener("click",uploadJSONToFirebase)

</script>
</html>